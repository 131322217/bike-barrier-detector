<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Bike Sensor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <h2>自転車 加速度計測</h2>

  <button id="startBtn">測定開始</button>
  <button id="stopBtn">測定停止</button>

  <p id="status">未開始</p>

  <script type="module">
    import { startMeasure, stopMeasure } from "./script.js";

    document.getElementById("startBtn").onclick = async () => {
      if (typeof DeviceMotionEvent?.requestPermission === "function") {
        const res = await DeviceMotionEvent.requestPermission();
        if (res !== "granted") return alert("センサー許可が必要です");
      }
      startMeasure();
      document.getElementById("status").textContent = "計測中";
    };

    document.getElementById("stopBtn").onclick = () => {
      stopMeasure();
      document.getElementById("status").textContent = "停止中";
    };
  </script>
</body>
</html>
